\section{文字列}\label{s1:文字列} %{
	この節で用いる約束を挙げておく。この節では、これらの約束を断りなく使う。
	\input{word}

	\subsection{積の摂動計算の例}\label{s2:積の摂動計算の例} %{
		$R$を半環、$m$を積とする。積$m$の定義域はある$R$係数半モジュールとする。
		積$m_t$がパラメータ$t\in R$で次のように与えられたとする。
		\begin{equation*}\begin{split} %{
			m_t &= \beta_0 + t\beta_1 + t^2\beta_2 + \cdots \\
			\beta_0 &= m \\
		\end{split}\end{equation*} %}
		このとき、$m_t$の結合性$m_t(m_t\otimes \myid)=m_t(\myid\otimes m_t)$
		を$t$のべきについて展開すると、任意の$t$に対しての結合性が成り立つための
		必要十分条件（少なくとも十分条件）が次の式が与えられる。
		\begin{equation*}\begin{split} %{
			\beta_1(\beta_0\otimes \myid) + \beta_0(\beta_1\otimes \myid)
			&= \beta_1(\myid\otimes \beta_0) + \beta_0(\myid\otimes \beta_1)
			\\
			\beta_2(\beta_0\otimes \myid) + \beta_1(\beta_1\otimes \myid)
			+ \beta_0(\beta_2\otimes \myid)
			&= \beta_2(\myid\otimes \beta_0) + \beta_1(\myid\otimes \beta_1)
			+ \beta_0(\myid\otimes \beta_2)
			\\
			\cdots \\
			\sum_{0\le i\le n}\beta_{n-i}(\beta_i\otimes \myid)
			&= \sum_{0\le i\le n}\beta_{n-i}(\myid\otimes \beta_i)
			\cdots \\
		\end{split}\end{equation*} %}

		集合$A$から生成された自由モノイド$WA$で、文字列の連結$m_*$からの変形
		\begin{equation}\label{eq:積の変形その一}\begin{split} %{
			m_t([a_1]\otimes[a_2]) &= [a_1a_2] + t[a_2a_1] \\
		\end{split}\end{equation} %}
		を計算してみる。$m_t$の結合性の条件は、$1$以上の自然数$n$に対して
		\begin{equation*}\begin{split} %{
			\beta_L^n = \sum_{0\le i\le n}\beta_{n-i}(\beta_i\otimes \myid)
			,\quad
			\beta_R^n = \sum_{0\le i\le n}\beta_{n-i}(\myid\otimes \beta_i)
		\end{split}\end{equation*} %}
		とおくと任意の$w_1,w_2,w_3\in WA$に対して
		\begin{equation*}\begin{split} %{
			\beta_L^n(w_1\otimes w_2\otimes w_3)
			=\beta_R^n(w_1\otimes w_2\otimes w_3)
		\end{split}\end{equation*} %}
		となる。文字列の並べ替えを計算するだけなので、
		$[a_1a_2\cdots a_m]=(12\cdots m)$と並びの順序を括弧$()$でくくって書き、
		テンソル積の記号は省略する。例えば、$[a_1a_2]\otimes[a_3a_4]$は$(12)(34)$
		と書く。
		
		$(1)(2)(3)$に対する結合性の条件をの$t^n$の項ごとに計算する。
		$0=\beta_2(1)(2)=\beta_3(1)(2)=\cdots$だから、$(1)(2)(3)$に対する計算
		では、任意の$n\in\mybf{N}+$で、次のように$\beta_L^n$と$\beta_R^n$は
		二項だけの和になる。
		\begin{equation*}\begin{split} %{
			\beta_L^n(1)(2)(3) &= \Bigl(\beta_n(\beta_0\otimes \myid)
			+\beta_{n-1}(\beta_1\otimes \myid)\Bigr)(1)(2)(3) \\
			&= \beta_n(12)(3) + \beta_{n-1}(21)(3) \\
			\beta_R^n(1)(2)(3) &= \Bigl(\beta_n(\myid\otimes \beta_0)
			+\beta_{n-1}(\myid\otimes \beta_1)\Bigr)(1)(2)(3) \\
			&= \beta_n(1)(23) + \beta_{n-1}(1)(32) \\
		\end{split}\end{equation*} %}
		となる。つまり、$t^n$の項で$m_t(1)(2)(3)$の結合性が成り立つための条件が
		\begin{equation*}\begin{split} %{
			\beta_n(12)(3) + \beta_{n-1}(21)(3)
			=\beta_n(1)(23) + \beta_{n-1}(1)(32)
		\end{split}\end{equation*} %}
		となる。したがって、ある$n$で$\beta_n(12)(3)=\beta_n(1)(23)=0$とできれば、
		$n$以上のすべての$p$で$\beta_p(12)(3)=\beta_p(1)(23)=0$とできる。
		以上を注意して計算する。

		$(1)(2)(3)$に対する一次の条件は
		$\beta_1(12)(3) + (213)=\beta_1(1)(23) + (132)$となり、
		$\beta_1(12)(3) = (132),\quad \beta_1(1)(23) = (213)$とおける。 
		二次の条件は
		$\beta_2(12)(3)+(231)=\beta_2(1)(23)+(312)$となり、
		$\beta_2(12)(3)=(312),\quad\beta_2(1)(23)=(231)$とおける。
		三次の条件は$\beta_3(12)(3)+(321)= \beta_3(1)(23)+(321)$となり、
		$\beta_3(12)(3)=\beta_3(1)(23)=0$とおける。したがって、
		\begin{equation*}\begin{split} %{
			m_t(12)(3) &= (123) + t(132) + t^2(312) \\
			m_t(1)(23) &= (123) + t(213) + t^2(231) \\
		\end{split}\end{equation*} %}
		となることがわかる。

		$(12)(3)(4)$に対する$m_t$の結合性のための条件は
		\begin{equation*}\begin{split} %{
			\beta_1(123)(4)+(1324)=\beta_1(12)(34)+(1243)
		\end{split}\end{equation*} %}
		および、$n\in\mybf{N}$に対して
		\begin{equation*}\begin{split} %{
			&\beta_{n+2}(123)(4) +\beta_{n+1}(132)(4) +\beta_{n}(312)(4) \\
			&= \beta_{n+2}(12)(34)+\beta_{n+1}(12)(43)
		\end{split}\end{equation*} %}
		となり、$(12)(3)$に対する場合と同様に、$\beta_n$の次数$n$について順に
		計算していくと、
		\begin{equation*}\begin{split} %{
			m_t(123)(4) &= (1234)+ t(1243)+ t^2(1423)+ t^3(4123) \\
			m_t(12)(34) &= (1234)+ t(1324)+ t^2\Bigl((1342)+ t^2(3124)\Bigr)
			+ t^3(3142)+ t^4(3412)
		\end{split}\end{equation*} %}
		となることがわかる。

		$\beta_n$の次数$n$について低次の項を二つ計算してみたが、$m_t$の規則の
		予想がつく。$m_t([a_1a_2\cdots a_m]\otimes[b_1b_2\cdots b_n])$に対して、
		一項目の文字の集合を$(a)=\set{a_1,a_2,\dots,a_n}$、
		二項目の文字の集合を$(b)=\set{b_1,b_2}$とすると、
		\begin{itemize} %{
			\item 文字列$[a_1a_2\cdots a_mb_1b_2\cdots b_n]$から始めて、
			\item 一度に一組だけ隣り合った$(a)$と$(b)$の文字の順序を入れ替えて
			新たな文字列を作り出す。
			ただし、$(a)$を右へ$(b)$を左へ動かす入れ替えしか許さないものと
			する。例えば、$[a_1a_2b_1a_3b_2]$という文字列から$[a_1b_1a_2a_3b_2]$
			または$[a_1a_2b_1b_2a_3]$へ文字の順序を入れ替える。
			\item 文字を入れ替えた時、因子$t$を文字列に掛ける。
			\item 文字を入れ替えたとき、既に同一の文字があったらそれ以上の
			文字の入れ替えを中止する。
			\item 文字列$[b_1b_2\cdots b_na_1a_2\cdots a_m]$に到達したとき
			終了する。
		\end{itemize} %}
		例えば、$m_t([a_1a_2]\otimes[b_1b_2])$の計算では、次のような規則で
		項を列挙していく。
		\begin{equation*}\xymatrix{
			& [a_1a_2b_1b_2] \ar[d] \\
			& [a_1b_1a_2b_2] \ar[dl] \ar[dr] \\
			[b_1a_1a_2b_2] \ar[dr] && [a_1b_1b_2a_2] \ar[dl] \\
			& [b_1a_1b_2a_2] \ar[d] \\
			& [b_1b_2a_1a_2] \\
		}\end{equation*}
		\begin{equation*}\begin{split} %{
		\end{split}\end{equation*} %}
		始点と終点を唯一つだけもつDAG（分岐と合流だけでループを持たないグラフ）
		で表現される。始点からの経路の長さが$t$のべきになる。
		また、次のような木の操作で表現してもよいだろう。
		\begin{equation*}\begin{split} %{
			\mytree{
			& \bullet \ar@{-}[dl] \ar@{-}[dr] \\
			a_1 && a_2 \\
			} \lhd [b_1b_2] &= \mytree{
			&& \bullet \ar@{-}[dll] \ar@{-}[dl]\ar@{-}[dr] \ar@{-}[drr]\\
			a_1 & a_2 && b_1 & b_2 \\
			}+ \mytree{
			& \bullet \ar@{-}[dl] \ar@{-}[dr] \\
			a_1 && a_2 \ar@{-}[dl] \ar@{-}[dr] \\
			& b_1 && b_2 \\
			}+ \mytree{
			& \bullet \ar@{-}[dl] \ar@{-}[d] \ar@{-}[dr]\\
			a_1 & a_2 \ar@{-}[d]  & b_2\\
			& b_1 \\
			} \\
			&\;+ \mytree{
			&& \bullet \ar@{-}[dl] \ar@{-}[dr] \\
			& a_1 \ar@{-}[dl] \ar@{-}[dr] && a_2 \\
			b_1 && b_2 \\
			} + \mytree{
			& \bullet \ar@{-}[dl] \ar@{-}[dr] \\
			a_1 \ar@{-}[d] && a_2 \ar@{-}[d] \\
			b_1 && b_2 \\
			} + \mytree{
			& \bullet \ar@{-}[dl] \ar@{-}[d] \ar@{-}[dr] \\
			a_1 \ar@{-}[d] & a_2 & b_2\\
			b_1 \\
			} \\
			&= \sum_{1\le i_1\le i_2\le 3}\left(\mytree{
			& \bullet:3 \ar@{-}[dl] \ar@{-}[dr] \\
			a_1:1 && a_2:2 \\
			}\lhd_{i_1}b_1\right)\lhd_{i_2}b_2
		\end{split}\end{equation*} %}
		ここで、$x\lhd_i b$は葉$b$を木$x$の$i$番目の頂点の最右の子供として
		付け加えるという操作である。頂点の番号は帰りがけ順につけられる。
		こうして作られた木を帰りがけ順に並べて単語にして、根$\bullet$を取り除く
		と、積$m_t([a_1a_2]\otimes[b_1b_2])$の項の和が列挙される。この方法では
		$t$のべきが明確でないが、DAGを用いた計算で必要となる重複のチェックを
		必要としないことが利点となる。

		\begin{todo}[接木によるシャッフル積の導出]\label{todo:接木によるシャッフル積の導出} %{
			$\beta_\lhd:RT_+A\otimes RWA\to RT_+A$を、任意の木$t\in T_+A$に対して
			\begin{equation*}\begin{split} %{
				t\lhd 1_W = t
			\end{split}\end{equation*} %}
			、任意の木$t\in T_+A,\;a_1,a_2,\dots,a_m\in A$に対して
			\begin{equation*}\begin{split} %{
				t\lhd [a_1a_2\cdots a_m] = 
				\sum_{i_1\le i_2\le \cdots\le i_m\in \myop{post}t}
				\Bigl(\cdots\bigl((t\lhd_{i_1}a_1)\lhd_{i_2}a_2\bigr)\cdots\Bigr)\lhd_{i_m}a_m
			\end{split}\end{equation*} %}
			と定義する。すると、
			\begin{equation*}\begin{split} %{
				t\lhd[a_1]\lhd[a_2]
				&= (\sum_{i_1<i_2\in \myop{post}t}+\sum_{i_2<i_1\in \myop{post}t})
				t\lhd_{i_1}a_1\lhd_{i_2}a_2 \\
				&\; + \sum_{i\in \myop{post}t}(t\lhd_{i}a_1)\lhd_{i}a_2
			\end{split}\end{equation*} %}
			となるが、二項目は$a_1$と$a_2$が同じの頂点$i$の部分木になる場合で、
			次の二通りの場合がある。
			\begin{equation*}\begin{split} %{
				\mytree{
					& b:i \ar@{-}[dl]\ar@{-}[d]\ar@{-}[dr] \\
					*+[F]{u} & a_1 & a_2 \\
				},\quad \mytree{
					& b:i \ar@{-}[dl]\ar@{-}[dr] \\
					*+[F]{u} && a_1 \ar@{-}[d] \\
					&& a_2 \\
				}
			\end{split}\end{equation*} %}
			ここで、$u$は操作前に$t$に存在する$i$の部分木で、$b\in A$は頂点$i$
			のラベルとする。二つ目の場合は、帰りがけ順で単語に射影
			$\pi_{\myop{post}}$すると次の木と同一の単語
			$[\pi_{\myop{post}}u]*[a_2a_1b]$を与える。
			\begin{equation*}\begin{split} %{
				\mytree{
					& b:i \ar@{-}[dl]\ar@{-}[d]\ar@{-}[dr] \\
					*+[F]{u} & a_2 & a_1 \\
				}
			\end{split}\end{equation*} %}
			したがって、$
				\pi_{\myop{post}}\Bigl(t\lhd[a_1]\lhd[a_2]\Bigr) 
				= \pi_{\myop{post}}\Bigl(t\lhd\bigl([a_1a_2] + [a_2a_1]\bigr)\Bigr)
			$となって、シャッフル積$[a_1]\sqcup[a_2]=[a_1a_2]+[a_2a_1]$を与える。
			三文字以上の場合は、場合分けが複雑になるので工夫が必要になるが、
			木の操作からシャッフル積を導出できるかもしれない。
			そもそもシャッフル積そのものが複雑である。
		\end{todo} %todo:接木によるシャッフル積の導出}

		\begin{todo}[余積からシャッフル積を導出]\label{todo:余積からシャッフル積を導出} %{
			シャッフル積を計算する手立てを余積で与えることを考える。
			余積$\Delta_\sqcup:RWA\to RWA\otimes RWA$を、
			\begin{equation*}\begin{split} %{
				\Delta_\sqcup1_W = 1_W\otimes 1_W
			\end{split}\end{equation*} %}
			任意の$a_1,a_2,\dots,a_m\in A$に対して
			\begin{equation*}\begin{split} %{
				\Delta_\sqcup [a_1a_2a_3\cdots a_m]
				& = 1_W\otimes [a_1a_2a_3\cdots a_m] \\
				&\; + [a_1]\otimes [a_2a_3\cdots a_m] \\
				&\; + [a_1a_2]\otimes [\cdots a_m] \\
				&\; + \cdots \\
				&\; + [a_1a_2a_3\cdots a_m]\otimes 1_W
			\end{split}\end{equation*} %}
			と定義する。次の可換図を満たす$R$双線形二項写像$\beta$を考える。
			\begin{equation*}\xymatrix@C+2pc{
				RWA^{\otimes 2} 
				\ar[r]^{(\Delta_\sqcup\otimes \Delta_\sqcup)\sigma_{23}}
				\ar[d]^{\beta}
				& RWA^{\otimes 4} \ar[d] 
				\ar[d]^{\beta\otimes \beta}
				\\
				RWA 
				& RWA^{\otimes 2} \ar[l]_{m_*} \\
			}\end{equation*}
		\end{todo} %todo:余積からシャッフル積を導出}

		\begin{todo}[課題]\label{todo:課題} %{
			\begin{itemize} %{
				\item 任意の元に対する積$m_t$を結合性の条件のみから定めることが
				できるか？
				\item できるとするならばなぜ？
				\item できるとするならば、線形代数で任意の元に対する積$m_t$を
				を求められないか？
				\item 双対な余積の変形
				\item 余積$
				[a_1a_2\cdots a_m]\mapsto
				1_W\otimes[a_1a_2a_3\cdots a_m]+[a_1]\otimes[a_2a_3\cdots a_m]
				+[a_1a_2]\otimes[\cdots a_m]+\cdots+[a_1a_2a_3\cdots a_m]\otimes1_W
				$に双対で$m([a_1]\otimes[a_2])=[a_1a_2]+[a_2a_1]$となる積は
				唯一定まるか？
				\item
			\end{itemize} %}
		\end{todo} %todo:課題}
	%s2:積の摂動計算の例}
%s1:文字列}

\section{リスト}\label{s1:リスト} %{
	$R=(R,+,0,m_R,1)$を可換半環、$A$を有限集合、$WA=(WA,m_*,1_*)$を$A$から
	生成された自由モノイドとする。ここで、積$m_*$は文字列の連結で定義される。
	積$m_*$を中置記法で$*$とも書くことにする。$WA$の元を$A$の元を並べたものを
	括弧でくくって表すことにする。例えば、$a_1,a_2,\dots, a_n\in A$を並べた
	$WA$の元を$[a_1a_2\cdots a_n]$と書く。

	$RWA$を$WA$を基底とする$R$係数半モジュールとする。$WA$の積$m_*$を$R$線形
	に拡張して$RWA$の積としたものを同じ記号$m_*$で書き、中置記法で$*$とも書く。
	さらに、中置記法$*$をテンソル積に対して次のように定義する。
	\begin{equation}\begin{split} %{
		&(w_{11}\otimes w_{12}\otimes\cdots\otimes w_{1m})
		*(w_{21}\otimes w_{22}\otimes\cdots\otimes w_{2m}) \\
		&\quad= (w_{11}*w_{21})\otimes (w_{12}*w_{22})\otimes\cdots\otimes (w_{1m}*w_{2m}) \\
		&\quad\text{for all }w_{11},w_{12},\dots,w_{1m},w_{21},w_{22},\dots,w_{2m}\in WA
	\end{split}\end{equation} %}
	積$m_*$に双対で、任意の$a\in A$に対して
	$\Delta_*[a]=[a]\otimes 1_*+1_*\otimes [a]$となる余積$\Delta_*$を求める。
	任意の$a_1,a_2,\dots,a_m\in A$に対して次の式が成り立つ必要がある。
	\begin{equation}\begin{split} %{
		\Delta_*[a_1a_2\cdots a_m] &= (\Delta_*[a_1])*(\Delta_*[a_2])*\cdots*(\Delta_*[a_m]) \\
		&= [a_1a_2\cdots a_m]\otimes 1_* \\
		&\; + \sum_{1\le i\le n}[a_1a_2\cdots a_m]_{\neg{\set{i}}}\otimes [a_i] \\
		&\; + \sum_{1\le i<j\le n}[a_1a_2\cdots a_m]_{\neg{\set{i,j}}}\otimes [a_ia_j] \\
		&\; + \cdots \\
		&\; + 1_*\otimes [a_1a_2\cdots a_m] \\
	\end{split}\end{equation} %}
	ここで、任意の$1\le i_1<i_2<i_n\le m$に対して
	$[a_1a_2\cdots a_m]_{\neg\set{i_1,i_2,\dots,i_n}}$を$[a_1a_2\cdots a_m]$
	から$i_1$番目と$i_2$番目と...と$i_n$番目の文字を取り除いた文字列とした。
	例えば、$[abc]_{\neg\set{1}}=[bc]$、$[abc]_{\neg\set{2}}=[ac]$、
	$[abc]_{\neg\set{1,3}}=[b]$となる。更に、余単位射を
	$\epsilon_*:w\mapsto \jump{w=1_*}$で定めると、単位元$1_*$に対する余積が
	$\Delta_*1_*=1_*\otimes 1_*+\cdots$という形になる必要がある。
	一方、双対性$\Delta_*[a]=(\Delta_*1_*)*(\Delta_*[a])$を満たすためには、
	$\Delta_*1_*=1_*\otimes 1_*$となる必要があることがわかる。まとめると、
	次のようになる。

	\begin{definition}[文字列の連結に双対な余積]\label{def:文字列の連結に双対な余積} %{
		次の余積$\Delta_*$は積$m_*$に双対になる。
		\begin{equation}\begin{split} %{
			\Delta_*: RWA\otimes RWA &\to RWA \\
			1_* &\mapsto 1_*\otimes 1_* \\
			[a_1a_2\cdots a_m] &\mapsto (\Delta_*[a_1])*(\Delta_*[a_2])*\cdots*(\Delta_*[a_m]) \\
			&= [a_1a_2\cdots a_m]\otimes 1_* \\
			&\; + \sum_{1\le i\le n}[a_1a_2\cdots a_m]_{\neg{\set{i}}}\otimes [a_i] \\
			&\; + \sum_{1\le i<j\le n}[a_1a_2\cdots a_m]_{\neg{\set{i,j}}}\otimes [a_ia_j] \\
			&\; + \cdots \\
			&\; + 1_*\otimes [a_1a_2\cdots a_m] \\
		\end{split}\end{equation} %}
		次の線形写像$\epsilon_*$は余積$\Delta_*$の余単位射となる。
		\begin{equation}\begin{split} %{
			\epsilon_*: RWA &\to R \\
				w &\mapsto \jump{w=1_*} \\
		\end{split}\end{equation} %}
	\end{definition} %def:文字列の連結に双対な余積}

	\begin{proposition}[$\Delta_*$は余可換]\label{prop:Delta_*は余可換} %{
		$\Delta_*$は余可換である。
	\end{proposition} %prop:Delta_*は余可換}
	\begin{proof} %{
		文字数についての帰納法で証明する。
		$\Delta_*11_*=1_*\otimes 1_*$だから、文字数が$0$の場合は余可換となる
		ことがわかる。
		任意の$a\in A$に対して$\Delta_*1[a]=[a]\otimes 1_*+[a]\otimes 1_*$
		だから、文字数が$1$の場合も余可換となることがわかる。
		文字数が$n\in\mybf{N}\bou 1\le n$以下の任意の単語に対して$\Delta\*$が
		余可換だとする。
		\begin{equation*}\begin{split} %{
			\Delta_*^{(1)}w\otimes\Delta_*^{(2)}w
			=\Delta_*^{(2)}w\otimes\Delta_*^{(1)}w
			\quad\text{for all }w\in WA\bou \zettai{w}\le n
		\end{split}\end{equation*} %}
		$w_1,w_2$を文字数が$n$以下の単語とする。次の式から単語$w_1*w_2$は
		余可換になることがわかる。
		\begin{equation*}\begin{split} %{
			\Delta_*(w_1*w_2) &= (\Delta_*w_1)*(\Delta_*w_2) \\
			&= \left((\Delta_*^{(1)}w_1)*(\Delta_*^{(1)}w_2)\right)
			\otimes \left((\Delta_*^{(2)}w_1)*(\Delta_*^{(2)}w_2)\right) \\
			&= \left((\Delta_*^{(2)}w_1)*(\Delta_*^{(2)}w_2)\right)
			\otimes \left((\Delta_*^{(1)}w_1)*(\Delta_*^{(1)}w_2)\right) \\
			& = \left(\Delta_*^{(2)}(w_1*w_2)\right)
			\otimes \left(\Delta_*^{(1)}(w_1*w_2)\right) \\
		\end{split}\end{equation*} %}
		任意の$n+1$文字の単語$w$は、ある$1$文字の単語$x$とある$n$文字の単語$y$
		の積$w=x*y$で書くことができるので、任意の$n+1$文字の単語に対する
		余積$\Delta_*$は余可換となることがわかる。
	\end{proof} %}

	この証明で用いた事柄は次のものである。
	\begin{itemize} %{
		\item 任意の$m+n$文字の単語は、ある$m$文字の単語とある$n$文字の単語の積
		で書くことができる。
		\item 積$m_*$と余積$\Delta_*$が双対である。
		\item $0$文字の単語に対する余積$\Delta_*$が余可換である。
		\item $1$文字の単語に対する余積$\Delta_*$が余可換である。
	\end{itemize} %}
	したがって、
	\begin{itemize} %{
		\item 積$m_*$と双対になり、
		\item $0$文字と$1$文字の単語に対する余積$\Delta_*$が余可換
	\end{itemize} %}
	となる任意の余積は余可換となる。

	ここで、余可換な余積について調べる。$\Delta$を一般の余積とすると、
	余結合性より、$\Delta^2$を次のように定義することができる。
	\begin{equation*}\begin{split} %{
		\Delta^2w=(\Delta\otimes\myid)\Delta w=(\myid\otimes\Delta)\Delta w
	\end{split}\end{equation*} %}
	同様にして、$\Delta^2$を次のように定義することができる。
	\begin{equation*}\begin{split} %{
		\Delta^3w
		&=(\Delta\otimes\myid\otimes\myid)(\Delta\otimes\myid)\Delta w \\
		&=(\myid\otimes\Delta\otimes\myid)(\Delta\otimes\myid)\Delta w \\
		&=(\myid\otimes\myid\otimes\Delta)(\Delta\otimes\myid)\Delta w \\
		&=(\Delta\otimes\myid\otimes\myid)(\myid\otimes\Delta)\Delta w \\
		&=(\myid\otimes\Delta\otimes\myid)(\myid\otimes\Delta)\Delta w \\
		&=(\myid\otimes\myid\otimes\Delta)(\myid\otimes\Delta)\Delta w \\
	\end{split}\end{equation*} %}
	任意の$n\in\mybf{N}\bou 1\le n$に対して、$\Delta^n$を次のように定義する。
	\begin{equation*}\begin{split} %{
		\Delta^nw = \Delta^{(1)}w\otimes \Delta^{(1)}\Delta^{(2)}w\otimes 
		\cdots\otimes \Delta^{(1)}\Delta^{(2)(n-1)}w\otimes \Delta^{(2)n}w
	\end{split}\end{equation*} %}
	この式を次の二分木で表すことにする。
	\begin{equation}\label{eq:余積の二分木}
		\Delta^nw = \xymatrix@R=1pc@C=1pc{
			w \ar[r]\ar[d] & \Delta^{(2)}w \ar[r]\ar[d] 
			& \cdots \ar[r] & \Delta^{(2)(n-1)} \ar[r]\ar[d] & \Delta^{(2)n}w \\
			\Delta^{(1)}w & \Delta^{(1)}\Delta^{(2)}w 
			& \cdots & \Delta^{(1)}\Delta^{(2)(n-1)}w \\
		}
	\end{equation}
	この木のどの葉に対して余積$\Delta$をとっても、余結合性により次の図のよう
	になり、最終的に図\eqref{eq:余積の二分木}の二分木の形になる。
	\begin{equation*}\begin{split} %{
		&\xymatrix@R=1pc@C=1pc{
			\cdots \ar[r] & \Delta^{(2)k}w \ar[r]\ar[d] & \Delta^{(2)(k+1)} \ar[r]\ar[d] & \cdots \\
			& \Delta^{(1)}\Delta^{(2)k}w \ar[ld]\ar[rd] & \Delta^{(1)}\Delta^{(2)(k+1)}w \\
			\Delta^{(1)}\Delta^{(1)}\Delta^{(2)(k+1)}w && \Delta^{(2)}\Delta^{(1)}\Delta^{(2)(k+1)}w \\
		} \\
		\\
		&= \xymatrix@R=1pc@C=1pc{
			\cdots \ar[r] & \Delta^{(2)k}w \ar[r]\ar[d] & \Delta^{(2)(k+1)} \ar[r]\ar[d] & \cdots \\
			& \Delta^{(1)}\Delta^{(2)k}w & \Delta^{(1)}\Delta^{(2)(k+1)}w \ar[ld]\ar[rd] \\
			& \Delta^{(1)}\Delta^{(1)}\Delta^{(2)k}w && \Delta^{(2)}\Delta^{(1)}\Delta^{(2)k}w \\
		} \\
	\end{split}\end{equation*} %}
	$WA$の基底を$\set{e_0,e_1,\cdots}$とおき、$R$値行列$\Delta_i^{jk}$を
	用いて$\Delta e_i=\Delta_i^{jk}e_j\otimes e_k$とする。
	余積$\Delta$の余結合性から、
	$\Delta_i^{ja}\Delta_a^{kl}=\Delta_a^{jk}\Delta_i^{al}$という式を満たす。
	図\eqref{eq:余積の二分木}による$\Delta^n$の表し方は、
	$(\Delta^3)_i^{jklm}=\Delta_i^{ja}\Delta_a^{kb}\Delta_b^{lm}$
	という縮約のとり方を指定していることに対応する。
	
	余積$\Delta$が余可換であった場合、$\Delta_i^{jk}=\Delta_i^{kj}$となる。
	$\Delta^2$についてみてみる。
	$(\Delta^2)_i^{jkl}=\Delta_i^{ja}\Delta_a^{kl}$となるが、
	$(\Delta^2)_i^{jkl}$の添え字$(kl)$について対称なことは、
	余積$\Delta$が余可換であることからわかる。また、余結合性
	$\Delta_i^{ja}\Delta_a^{kl}=\Delta_a^{jk}\Delta_i^{al}$を使うと、
	$(\Delta^2)_i^{jkl}$の添え字$(jk)$について対称なこともわかる。
	したがって、$(\Delta^2)_i^{jkl}$の添え字は$(jkl)$の任意の置換によって
	不変になっていることがわかる。テンソル積$\otimes$の記法を用いて
	$\Delta^nw=w_{(1)}\otimes w_{(2)}\otimes\cdots\otimes w_{(n+1)}$
	と書くと、$n+1$次の任意の置換$\sigma$に対して
	$\Delta^nw=w_{(\sigma1)}\otimes w_{(\sigma2)}\otimes\cdots\otimes w_{\left(\sigma(n+1)\right)}$
	となる。

	\begin{todo}[シャッフル積]\label{todo:シャッフル積} %{
		次の可換図で定義された$R$双線形二項演算$\beta_\sqcup$は積になるか？
		\begin{equation}\xymatrix{
			RWA\otimes RWA \ar[r]^{m_*} \ar@{.>}[d]^{\beta_\sqcup} 
			& RWA \ar[d]^{\Delta_*} \\
			RWA & RWA\otimes RWA \ar[l]_{m_*} \\
		}\end{equation}
	\end{todo} %todo:シャッフル積}

	\begin{todo}[ここまで]\label{todo:ここまで} %{
	\end{todo} %todo:ここまで}

	次の$R$線形写像$\Delta_\amalg$は余積になる。
	\begin{equation}\begin{split} %{
		\Delta_\amalg: RWA &\to RWA\otimes RWA \\
			[a_1a_2\cdots a_{m-1}a_m] 
				&\mapsto [a_1a_2\cdots a_{m-1}a_m]\otimes 1_* \\
				&\quad + [a_1a_2\cdots a_{m-1}]\otimes [a_m] \\
				&\quad + \cdots \\
				&\quad + [a_1]\otimes [a_2\cdots a_{m-1}a_m] \\
				&\quad + 1_*\otimes [a_1a_2\cdots a_{m-1}a_m] \\
	\end{split}\end{equation} %}
	余積$\Delta_\amalg$に対する余単位射は$\epsilon_*$となる。

	\begin{todo}[余積から積の導出]\label{todo:余積から積の導出} %{
		与えられた余積と双対になる積を導出する方法を考える。
		逆の場合の、与えられた積に双対になる余積の導出は、文字数の小さいもの
		から大きなものを順の求めていけばよい。
		一般に、積$m_\odot$に双対な余積$\Delta_\odot$は次のようになる。
		\begin{equation}\begin{split} %{
			\Delta_\odot(w_1\odot w_2) &= (\Delta_\odot w_1)\odot(\Delta_\odot w_2) \\
		\end{split}\end{equation} %}
		したがって、積$m_\odot$が文字数を保存する場合には、文字数の小さいもの
		から大きなものへと余積$\Delta_\odot$が順に求まる。
	\end{todo} %todo:余積から積の導出}
%s1:リスト}
