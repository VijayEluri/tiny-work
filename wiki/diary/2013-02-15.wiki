[[diary|日誌]]
%toc 2013-02-15

= Parikhの定理 =

== Lindqvist ==
wikipedia
[[http://en.wikipedia.org/wiki/Ambiguous_grammar|Ambiguous grammar]]
の参考文献にあった
* [[http://www8.cs.umu.se/kurser/TDBC92/VT06/final/3.pdf|Parikh's theorem]]`calc/parikh-1.pdf`
を読む。

$A$を有限集合とする。
$[-:-]:A^*\times A\to\sizen\that w\times a\mapsto\dots$
を$w$に含まれる$a$の数を勘定する写像とする。
ある文字$a\in A$を固定すると、$[-:a]:A^*\to\sizen$はモノイド準同型となる。
そして、$V$を半加群とし、$A$から$V$への写像$\phi:A\to V$が与えられると、
$A^*$から$V$へのモノイド準同型$\phi_*:A^*\to V$が次のように定義される。
{{$
\phi_*w := \sum_{a\in A}[w:a](\phi a) \quad\text{for all } w\in A^*
}}$
$\phi$からモノイド準同型$A^*\to V$を作る方法は、upto同型で、この方法に一意に定まる。
圏の随伴$(-^*,\clU,\alpha):\cat{Mon}(A^*, V)\simeq\cat{Set}(A,\clU V)$
を用いると、$\phi_*:=\alpha^{-1}\phi$となっている。

== Hopkins ==
* <a name='hopkins'>[[http://www.cs.cornell.edu/~kozen/|Parikh's theorem in commutative Kleene algebra]]</a>`calc/Hopkins.pdf`
を読む。

この論文では、次のことを証明している。

<div class='proposition' id='prop-1'>
可換Kleene代数$K$では、任意の多項式$(f|x)\in K[x]$に対して、
$x_f:=(f'\circ f|0)^*(f|0)$は次の性質を満たす
* $x_f\ge (f|x_f)$
* $x\ge (f|x)\implies x\ge x_f$
</div>

この論文の中では$K$が完備であることを仮定していないので、
$x_f$が$x\ge(f|x)$を満たす解の最小値を与えることは、
$K$が完備な場合での$x=(f|x)$を満たす解の最小値を与えることに相当する。

<a href='#hopkins'>論文</a>の仮定から、もう少し突っ込んで$x_f$を調べてみる。
$f_0:=(f|0)$とおくと、次の式から、
$n\le2\in\bfN$で$x_f^n=f_0^n(f'|f_0)^*$となる。
{{$
	a^*b^* = \sum_{m,n\in\bfN} a^mb^n 
	= \sum_{n\in\bfN}\sum_{k=0}^n a^kb^{n-k}
	\overset{!}{=} \sum_{n\in\bfN} (a + b)^n = (a + b)^*
	\quad\text{! idempotency and commutativity}
}}$
したがって、次の式が成り立ち、
{{$
(f|x_f) = \sum_{n\in\bfN} f_nx_f^n 
= f_0 + \left(\sum_{n\in\bfN} f_{n+1}f_0^n\right) x_f
= (f|0) + (f'\circ f|0) x_f
}}$
$x_f$が$f$の不動点$x_f=(f|x_f)$になっていることがわかる。
したがって、最初に挙げた定理から、$x_f$が不動点$x_f=(f|x_f)$の最小値になっていることがわかる。
<a href='#prop-1'>命題</a>では、
$(f|x_f)\le x_f$という不等式の形で留まっているが、ここでは、
$(f|x)=\sum_{n\in\bfN}f_nx^n$と級数展開できるという、
より強い仮定の元で計算している。
この場合、任意の多項式$(f|x)\in K[x]$に対して、
$x_f:=(f'\circ f|0)^*(f|0)$は次の性質を満たすことになる。
* $x_f=(f|x_f)$
* $x\ge(f|x)\implies x\ge x_f$
したがって、$x=(f|x)=(f|0)+(f'\circ f|x)x$の解が一撃で$(f'\circ f|0)^*(f|0)$と求まるという、
大変有難いことが成り立つ。

最後に<a href='#hopkins'>論文</a>の題名になっているParikhの定理について述べておく。
$A:=\set{a_1,\dots,a_N}$を大きさ$N$の有限集合として、
モノイド準同型$\phi:A^*\to\bfN^N$を次のように定義する。
{{$
\phi w := \begin{pmatrix}
	\text{the number of occurence of $a_1$ in $w$} \\
	\text{the number of occurence of $a_2$ in $w$} \\
	\vdots \\
	\text{the number of occurence of $a_N$ in $w$} \\
\end{pmatrix}\in\bfN^N \quad\text{for all } w\in A^*
}}$
そして、$L,M\subseteq A^*$として、
集合同型$\phi L_1\simeq\phi L_2\subseteq\bfN^N$が成り立つとき、
$L$と$M$は文字同値（letter equivalence）という。Parikhの定理は、
* すべての文脈自由言語は正規言語に文字同値となる
と主張する。
$K$を$\hat{K}$を対称化したものだとして、
{{$
\hat{K} := \bfB\blr{A},\quad K:= \frac{\bfB\blr{A}}{\blr{a_ia_j=a_ja_i\text{ for all }i,j\in1..N}}
}}$
$A$を全順序集合にすると、代数準同型$\pi:\hat{A}\to A$を定義できる。
$\hat{K}$の文脈自由文法を$\hat{x}=(\hat{f}|\hat{x})$とすると、
これを$\pi$によって$K$に持って行くと、$\pi\hat{x}=(\pi\hat{f}|\pi\hat{x})$
となる。
この等式の解は、$f:=\pi\hat{f}$とすると、<a href='#prop-1'>命題</a>から、
$x_f=(f'\circ f|0)^*(f|0)$となる。この解は思いっきり正規言語なので、
文脈自由言語から正規言語への代数準同型が得られたことになる。
そして、$\pi$は文字の並びを対称化しているだけだから、~~多分~~
<a href='#sym'><sup>下記</sup></a>、
$A^*$から可換モノイド$M$への任意のモノイド準同型$\psi:A^*\to M$に対して、
モノイド同型$\psi\hat{K}\simeq\psi\pi\hat{K}$が成り立つ。
したがって、<a href='#hopins'>論文</a>で主張しているように、
彼らの結果は、Parikhの定理を任意の可換モノイドへの任意のモノイド準同型に拡張したものになっている。

<a name='#sym'/>
=== 対称化の普遍性 ===
$X$を集合、$\clW X$を$X$から生成される自由モノイド、
$\clS X$を$X$から生成される可換自由モノイドとする。
$\clU$をモノイドから集合への忘却関手とすると、
任意の<u>可換</u>モノイド$A$に対して、
集合同型$\cat{Mon}(\clW X,A)\simeq\cat{Set}(X,\clU A)\simeq\cat{Mon}(\clS X,A)$が成り立つ。

<a name='#faa'/>
=== Faà di Bruno代数との類似 ===
<a href='#prop-1'>命題</a>で、$a:=(f|0)$、$(v|x):=(f'|x)$とすると、
次の式から、
{{$
\begin{alignat}{3}
x_f &= (f'\circ f|0)^*(f|0) &&= (f|0) + (f'\circ f|0) x_f &&= a + (v|a)x_f \\
& (f|x) &&= (f|0) + (f'|x)x &&= a + (v|x)x
\end{alignat}
}}$
次のことが成り立つ。
* $x=a+(v|a)x$が一意に解を持つならば、それは$x_f$となり、
* $a+(v|x)x\le x\implies x_f\le x$となる
ここで、$x=a+(v|a)x$は、解が存在すことも、
解が一意に定まることも保証されていないことに注意する。
例えば、$a=0$の場合は、$(v|a)^\infty\in K$とならない限り、解は存在しない。
仮に、$(v|a)^\infty\in K$だったとしても、$a=0$かつ$(v|a)=1$の場合は、
任意の$x\in K$が$x=a+(v|a)x$の解となる。任意の$a,b\in K$に対して
$x=b^*a\implies x=a+bx$だが、逆は必ずしも成り立たないことに起因する。

複素数上の形式級数環$\bfC[[x]]$を写像の合成によって$\bfC[[x]]\subseteq\op{end}\bfC[[x]]$とみた時、
$V\subset\bfC[[x]]$を$x+\sum_{n\in\bfN} f_{n+2}x^{n+2}$の形の形式級数全体の作る集合とすると、
* $V$は部分モノイドとなり、
* 余単位射$\epsilon:(f|x)\mapsto(f|0)$により、
	コピー演算$\op{dup}:f\mapsto f\times f$は余積となり、
* 写像の合成とコピーは双モノイドになる。
今の場合の、線形等式$x=a+(v|a)x$の解の一意性が壊れる場合の多項式$(f|x)=a+(v|x)$の形は、
$V$が双モノイドとなる場合の形式級数の形と全く同じになっている。

=== 問題 ===
* <a name='lutttenberger'>
	[[http://arxiv.org/abs/1112.2864|An Extension of Parikh's Theorem beyond Idempotence]]
	</a>を読むこと。
* Kleeneスターが級数展開できることはどのような仮定しているのかを明らかにせよ。
	連続性に関係していると思っている。<a href='#hopkins'>論文</a>では、
	$K$が完備かどうかに関わらずに成り立つことを議論している。
	$K$が完備であれば、$x=(f'\circ f|0)^*(f|0)\implies x=(f|x)$が言えるのではないかと思っている。
* 文法$x=a+bax$と$x=a+xbx$は自然数上で考えると異なる多項式を解に持つが、
	ブーリアン上で考えると同じ多項式$x=(ba)^*a$を解に持つ。
	$a^*b^*=(a+b)^*$の計算がカギになるかも。
	Litvinovなどがやっているべき等代数
	<a name='litvinov'>
	[[http://arxiv.org/abs/1005.1247|Tropical Mathematics, Idempotent Analysis, Classical Mechanics and Geometry]]
	</a>
	や<a href='#lutttenberger'>論文</a>とも関係するのだろうが、
	有理数または整数からブーリアンへ移行する方法が思いつかない。
* <a href='##faa'>Faà di Bruno代数との類似</a>を考えてみたい。
	等式$x=a+x$では、$a\neq0$の時は$x=a$が解になるが、$a=0$の時は任意の$x\in K$が解になる。
	$a=0$で対称性が一気に高くなるとみることができる。
