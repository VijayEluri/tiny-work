[[diary|日誌]]
%toc 2013-02-12

= 形式言語 =

== 空遷移の消去 ==
$A:=\set{a,b,l,r}$上の文法
{{$
\left\{\begin{split}
	X &= Y + YbX:B \\
	Y &= a:V + lXr:U \\
\end{split}\right.\implies \left\{\begin{split}
	X &= Y + BYbX\bar{B} \\
	Y &= Va\bar{V}Z + UlXr\bar{U}Z \\
	Z &= 1 \\
\end{split}\right. \sim \vcenter{\xymatrix{
	X \ar@/_1ex/[d]_{1 + \eta_1} \\
	Y \ar[r]^a \ar@/_1ex/[u]_{l\eta_2} 
	& *++[o][F=]{Z} \ar@(rd,ru)[]_{\eta_2^\trn r}
	\ar@(u,r)[ul]_{\eta_1^\trn b}
}}
}}$

== 本質的に曖昧な文脈自由言語 ==
=== Villalpando ===
* <a name='2013-02-15'>
	[[http://www.adammikeal.org/courses/compute/presentations/inherently_ambiguous_cfg_pres.ppt|Description of Inherently Ambiguous Context-Free Grammars]]
	</a>元版の`ppt`形式を`lang/ambibuity.pdf`に変換済み。綴りを間違えた。
を読む。

集合$A=\set{a,b,c,d}$から生成される次の形式級数$x$を考える。
{{$
x = \sum_{m,n\in\sizen_+} \plrg{a^mb^mc^nd^n + a^mb^nc^nd^m}
}}$
$x$は$2$次のDyck言語の部分集合になっている。$y$は$(a,b)$と$(c,d)$が組になり、
$z$は$(a,d)$と$(b,c)$が組になっている。$x$が文脈自由になることは、
$x$の右辺一項目と二項目それぞれが文脈自由になっていて、
文脈自由言語の和は文脈自由言語になることからわかる。
具体的な文脈自由文法の形は<a href='#2013-02-15'>講義録</a>に書いてある。
$x$を自然数上の形式級数だと思うと、$x$は次のように書き直せる。
{{$
x = 2 \sum_{k\in\sizen_+} a^kb^kc^kd^k
+ \sum_{m,n\in\sizen_+} \is{m\neq n} \plrg{a^mb^mc^nd^n + a^mb^nc^nd^m}
}}$
この式の一項目が曖昧さを表す。文法を書き直すことで、
一項目$2\sum_{k\in\sizen_+}a^kb^kc^kd^k$の係数を$1$にすることができれば、
$x$は本質的には曖昧でないという。
一般に、任意の$f_0,\dots,f_n\in\sizen A^*$と$a_1,\dots,a_n\in A$に対して
$\sum_{n\in\sizen}f_0a_1^nf_1a_2^nf_2\cdots a_n^nf_n$という形の級数は、
$n$が$3$以上では文脈自由でない。したがって、一項目を$1$にする文脈自由文法は存在せず、
$x$は本質的に曖昧になる。

<a href='#2013-02-15'>講義録</a>には、英語での曖昧さを含む文が紹介されている。

    The girl touches the boy with the flower.
    
この文は次の二通りの意味に（自然に）解釈できる。	
* 女の子は花で男の子に触れた。
* 女の子は花を持った男の子に触れた。
`with`が、`touch`に掛かるのか、`the boy`に掛かるのかによって意味が変わってくる。
この例は、形式言語での曖昧さと同じ現象になっている。
日常言語での`意味`とは、ボンヤリしたものだが、
形式言語での`意味`とは、パース木と呼ばれるものになる。
さらに、<a href='#chomsky'>Chomsky-Shützenberの代数的定理</a>によると、
パース木も経由せずに、より原始的な、代数式の根の性質として形式言語の曖昧さを定義することができる。

=== Bassino ===
* [[http://algo.inria.fr/pfac/PFAC/Program_files/nicaud.pdf|Inherent Ambiguity of Context-Free Languages]]`lang/inherently_ambiguous_cfg_pres.pdf`
を読む。

Chomsky-Schützenbergerの代数的定理を使うと言語の曖昧さを見通しよく扱うことができるそうだ。
Chomsky-Schützenbergerの代数的定理は知っていたが、明示的に書かれているのは初めて見た。

<div class='proposition' id='chomsky'>(Chomsky-Schützenberger)
The counting generating function of a non-ambiguous context-free
language is algebraic over $\bun$.
</div>
から
<div class='proposition' id='chomsky-1'>
If the counting generating function is transcendental over $\bun$, then the
language is ambiguous.
</div>
が導かれる。この結果は一見Post対応問題と矛盾するように見えるが、
$5$次以上の多項式の解を求める一般的な方法はないので、大丈夫なのだろう。
ただし、$4$次以下の多項式は解を求めることができるので、$4$次以下の多項式に対しては本質的に曖昧かどうかを判定できてしまうことになる。

数え上げ生成関数とは、多項式への線形射$\phi:\sizen A^*\to\sizen\blr{t}\that w\mapsto t^{|w|}$によって
得られる像を言う、多分。長さ$n$の単語が幾つあるかを数える関数だと思う。
$\phi$によって文法は自然数上の代数式になる。
例えば、$x=a+lxr+xbx$という文法なら、$\phi x=t+t^2(\phi x)+t(\phi x)^2$となる。
この$\phi$によって文法を変換したものを数え上げの代数式と言うことにすると、
上記の二つの命題は次のことを主張する。
* 数え上げの代数式が有理多項式に根を持つ$\iff$生成された言語が曖昧でない
<a href='#chomskї-1'>命題</a>では$\bun$と書かれているが、多分、
有理多項式のことだろう。

$A:=\set{a}$から生成される次の文法を考えると、
{{$
X = A_1A_2 + A_2A_1,\quad A_1 = a,\; A_2 = a^2
}}$
この文法から生成される言語は曖昧になる。しかし、
生成される言語は本質的に曖昧ではないので、品詞$A_1$と$A_2$の組み合わせで文法を作ることを諦めれば、曖昧さを解消することができる。例えば、$X=a^3$とすればよい。
生成される言語に本質的な曖昧さが無い場合は、パーサーに品詞分解させるのを諦めて、
パーシング後に別の方法で品詞分解することで対応することになる。

== ブーリアンの双対性 ==
$\mathbf{2}:=\set{0,1}$を大きさ$2$の集合とする。
自己双射$\phi:\mathbf{2}\to\mathbf{2}:=[0,1]\mapsto[1,0]$は、
半環同型$\phi:(\mathbf{2}),\lor,\land)\simeq(\mathbf{2},\land,\lor)$を導く。
{{$
\begin{array}{r|rr}
	\lor & 0 & 1 \\\hline
	0 & 0 & 1 \\
	1 & 1 & 1 \\
\end{array},\quad \begin{array}{r|rr}
	\land & 0 & 1 \\\hline
	0 & 0 & 0 \\
	1 & 0 & 1 \\
\end{array} \overset{\phi}{\simeq} \begin{array}{r|rr}
	\land & 1 & 0 \\\hline
	1 & 1 & 0 \\
	0 & 0 & 0 \\
\end{array},\quad \begin{array}{r|rr}
	\lor & 1 & 0 \\\hline
	1 & 1 & 1 \\
	0 & 1 & 0 \\
\end{array}
}}$
$\op{xor}$は群になる。
{{$
\begin{array}{r|rr}
	\op{xor} & 0 & 1 \\\hline
	0 & 0 & 1 \\
	1 & 1 & 0 \\
\end{array} \implies \begin{split}
	0\op{xor}[0,1] &= [0,1] \\
	1\op{xor}[0,1] &= [1,0] \\
\end{split}
}}$
$(\mathbf{2},\op{xor},\land)$は体になるが、$(\mathbf{2},\op{xor},\lor)$は体にならない。
{{$
\begin{array}{r|rr}
	\op{xor} & 0 & 1 \\\hline
	0 & 0 & 1 \\
	1 & 1 & 0 \\
\end{array}\overset{0\lor-}{\mapsto}\begin{array}{r|rr}
	\op{xor} & 0 & 1 \\\hline
	0 & 0 & 1 \\
	1 & 1 & 0 \\
\end{array},\quad\begin{array}{r|rr}
	\op{xor} & 0 & 1 \\\hline
	0 & 0 & 1 \\
	1 & 1 & 0 \\
\end{array}\overset{1\lor-}{\mapsto}\begin{array}{r|rr}
	\lor & 1 & 1 \\\hline
	1 & 1 & 1 \\
	1 & 1 & 1 \\
\end{array} \\
\begin{array}{r|rr}
	\op{xor} & 0 & 1 \\\hline
	0 & 0 & 1 \\
	1 & 1 & 0 \\
\end{array}\overset{0\land-}{\mapsto}\begin{array}{r|rr}
	\op{xor} & 0 & 0 \\\hline
	0 & 0 & 0 \\
	0 & 0 & 0 \\
\end{array},\quad\begin{array}{r|rr}
	\op{xor} & 0 & 1 \\\hline
	0 & 0 & 1 \\
	1 & 1 & 0 \\
\end{array}\overset{1\land-}{\mapsto}\begin{array}{r|rr}
	\op{xor} & 0 & 1 \\\hline
	0 & 0 & 1 \\
	1 & 1 & 0 \\
\end{array}
}}$
$(\mathbf{2},\land,\op{xor})$と$(\mathbf{2},\lor,\op{xor})$は共に体にならない。
{{$
\begin{array}{r|rr}
	\lor & 0 & 1 \\\hline
	0 & 0 & 1 \\
	1 & 1 & 1 \\
\end{array}\overset{0\op{xor}-}{\mapsto}\begin{array}{r|rr}
	\lor & 0 & 1 \\\hline
	0 & 0 & 1 \\
	1 & 1 & 1 \\
\end{array},\quad\begin{array}{r|rr}
	\lor & 0 & 1 \\\hline
	0 & 0 & 1 \\
	1 & 1 & 1 \\
\end{array}\overset{1\op{xor}-}{\mapsto}\begin{array}{r|rr}
	\land & 1 & 0 \\\hline
	1 & 1 & 0 \\
	0 & 0 & 0 \\
\end{array} \\
\begin{array}{r|rr}
	\land & 0 & 1 \\\hline
	0 & 0 & 0 \\
	1 & 0 & 1 \\
\end{array}\overset{0\op{xor}-}{\mapsto}\begin{array}{r|rr}
	\land & 0 & 1 \\\hline
	0 & 0 & 0 \\
	1 & 0 & 1 \\
\end{array},\quad\begin{array}{r|rr}
	\land & 0 & 1 \\\hline
	0 & 0 & 0 \\
	1 & 0 & 1 \\
\end{array}\overset{1\op{xor}-}{\mapsto}\begin{array}{r|rr}
	\lor & 1 & 0 \\\hline
	1 & 1 & 1 \\
	0 & 1 & 0 \\
\end{array}
}}$

== 空遷移の扱い ==
ある$\phi:H^*\to A^*$を用いて状態は$\sum_{w\in H^*}\bra{1}(\phi w)\otimes w$と書けるが、
$\phi$について成り立つ性質があるかもしれない。
